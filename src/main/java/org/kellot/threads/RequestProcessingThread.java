package org.kellot.threads;import org.kellot.controller.FrontController;import org.kellot.exception.UnsupportedHTTPMethodException;import org.kellot.request.HttpRequest;import org.kellot.util.HttpParser;import java.io.*;import java.net.Socket;import java.nio.charset.StandardCharsets;/** * A worker thread that is initiated to parse the request data * and pass to the controller. * * @author SittX */public class RequestProcessingThread extends Thread {    private Socket socket;    public RequestProcessingThread(Socket socket) {        this.socket = socket;    }    /**     * Parse the incoming request data into "HttpRequest" class using the "HttpParser" utility class.     * It will then pass the "HttpRequest" object into the "FrontController" to direct the request to different dispatcher.     * Once the request has been parsed, the "HttpRequest" will be passed into the "FrontController" class     * for further processing on the request.     */    @Override    public void run() {        try {            BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));            BufferedWriter output = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));            // TODO Keep the connection alive and listen to sub-sequence request from the client            HttpRequest request = new HttpParser(input).parse();            FrontController.getInstance().dispatchResponse(output, request);        } catch (IOException e) {            throw new RuntimeException(e);        } catch (UnsupportedHTTPMethodException e) {            // Just log the event            //  throw new RuntimeException(e);        }    }}